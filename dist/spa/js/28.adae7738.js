(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"289f":function(t,e,a){"use strict";var n=a("e9b9"),o=a("a748");const i="panel/";class s{getPayments(){return n["a"].create(t=>{o["a"].get(i+"payments/").then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}createPayment(t){return n["a"].create(e=>{o["a"].post(i+"payments/",{bank:t.bank,method:t.method}).then(t=>{console.log(t),e.next(t.data),e.complete()}).catch(t=>{e.error(t)})})}}e["a"]=new s},"797b":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"col-md-12 col-xs-12 q-pa-sm"},[a("div",{staticClass:"q-ma-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{"max-width":"40px"}},[a("q-btn",{staticStyle:{color:"#9E9E9E"},attrs:{flat:"",round:"",icon:"keyboard_backspace"},on:{click:function(e){return t.$router.back()}}})],1),a("div",{staticClass:"col2"},[a("h5",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[t._v("\n                    Nuevo Método de Pago\n                ")])])]),a("div",{staticClass:"row"},[a("h6",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[t._v("\n                  Información del Titular\n              ")])])]),a("div",{staticClass:"column items-end"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("q-btn",{staticClass:"q-pa-xs float-right",attrs:{color:"red-10",label:"Crear compra",loading:t.loading},on:{click:function(e){return t.checkPayment()}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])})],1)])])]),a("div",{staticClass:"q-mx-sm q-mb-lg"},[a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-1"},[a("q-select",{attrs:{outlined:"",color:"dark",options:t.id_options,rules:[function(t){return!!t||"Debe ingresar el tipo de documento"}]},model:{value:t.id_type,callback:function(e){t.id_type=e},expression:"id_type"}})],1),a("div",{staticClass:"col q-ml-xs q-mr-sm"},[a("q-input",{attrs:{outlined:"",color:"dark",label:"No. identificación del titular",rules:[function(t){return!!t||"Debe ingresar el número de identificación"}]},model:{value:t.bank.owner_id,callback:function(e){t.$set(t.bank,"owner_id",e)},expression:"bank.owner_id"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{outlined:"",color:"dark",label:"Nombre del titular",rules:[function(t){return!!t||"Debe ingresar el nombre del banco"}]},model:{value:t.bank.account_owner,callback:function(e){t.$set(t.bank,"account_owner",e)},expression:"bank.account_owner"}})],1)]),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col q-ml-xs q-mr-sm"},[a("q-input",{ref:"email",attrs:{outlined:"",color:"dark",label:"Correo del titular",rules:[function(t){return!!t||"Debe ingresar el correo"},t.isValidEmail]},model:{value:t.bank.email,callback:function(e){t.$set(t.bank,"email",e)},expression:"bank.email"}})],1),a("div",{staticClass:"col"},[a("q-input",{ref:"phone",attrs:{outlined:"",color:"dark",label:"Número de teléfono del titular",rules:[function(t){return!!t||"Debe ingresar un número de telefono"},t.isValidPhone]},model:{value:t.bank.phone,callback:function(e){t.$set(t.bank,"phone",e)},expression:"bank.phone"}})],1)]),a("q-separator",{staticClass:"q-mt-lg",attrs:{inset:""}}),a("div",{staticClass:"row q-mx-bg"},[a("div",{staticClass:"col2"},[a("h6",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm"},[t._v("\n                  Información de la cuenta\n              ")])])]),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{outlined:"",color:"dark",label:"Banco",rules:[function(t){return!!t||"Debe ingresar el nombre del banco"}]},model:{value:t.bank.name,callback:function(e){t.$set(t.bank,"name",e)},expression:"bank.name"}})],1),a("div",{staticClass:"col q-mx-sm"},[a("q-input",{attrs:{outlined:"",color:"dark",label:"Número de cuenta"},model:{value:t.bank.account_number,callback:function(e){t.$set(t.bank,"account_number",e)},expression:"bank.account_number"}})],1),a("div",{staticClass:"col"},[a("q-select",{attrs:{outlined:"",color:"dark",options:t.currencyOptions,label:"Moneda",rules:[function(t){return!!t||"Debe seleccionar el tipo de moneda"}]},model:{value:t.bank.currency,callback:function(e){t.$set(t.bank,"currency",e)},expression:"bank.currency"}})],1)]),a("div",{staticClass:"row q-mx-bg"},[a("div",{staticClass:"col2"},[a("h6",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm"},[t._v("\n                  Métodos de pago\n              ")])])]),t._l(this.paymentOptions,(function(e,n){return a("div",{staticClass:"q-gutter-sm"},[a("q-checkbox",{attrs:{label:e,color:"red-10"},model:{value:t.paymentValue[n],callback:function(e){t.$set(t.paymentValue,n,e)},expression:"paymentValue[index]"}})],1)}))],2)])])])},o=[],i=a("2b0e"),s=a("289f"),l=i["default"].extend({data(){return{loading:!1,paymentValue:[!1],paymentOptions:["ZELLE","TRANSFERENCIA $","TRANSFERENCIA BS","PAGO MOVIL"],currencyOptions:["USD","BS"],bank:{name:"",account_owner:"",account_number:"",owner_id:"",email:"",phone:"",currency:""},method:[{payment_type:""}],id_type:"",id_options:["V","E","P","J","G"]}},mounted(){let t=this;this.paymentValue.pop();for(var e=0;e<this.paymentOptions.length;e++)this.paymentValue.push(!1);console.log(this.paymentValue),t.method.pop()},methods:{checkPayment(){if(""!==this.bank.owner_id&&""!==this.id_type&&""!==this.bank.account_owner&&""!==this.bank.email&&""!==this.bank.account_owner)if(""!==this.bank.name&&""!==this.bank.currency){for(var t=0;t<this.paymentOptions.length;t++)this.paymentValue[t]&&this.method.push({payment_type:this.paymentOptions[t]});this.method.length>0?this.createPayment():this.showNotif("Seleccionar al menos un método de pago","red-10")}else this.showNotif("Completar información de la cuenta","red-10");else this.showNotif("Completar información del titular","red-10")},createPayment(){this.bank.owner_id=this.id_type+"-"+this.bank.owner_id,console.log("everything in order. Creating payment..."),this.loading=!0,s["a"].createPayment({bank:this.bank,method:this.method}).subscribe({complete:()=>{this.loading=!1,this.showNotif("Método de pago registrado exitosamente","indigo-10"),setTimeout(()=>this.$router.back(),1e3)}})},showNotif(t,e){this.$q.notify({message:t,color:e,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},isValidNumber(t){const e=/^(?=[0-9]{1,20}$)/;return e.test(t)||"Número inválido"},isValidPhone(t){const e=/^(?=[0-9+-]{1,15}$)/;return e.test(t)||"Teléfono inválido"},isValidEmail(t){const e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(t)||"Correo inválido"}}}),r=l,c=a("2877"),d=a("9989"),u=a("9c40"),m=a("e669"),p=a("ddd8"),b=a("27f9"),h=a("eb85"),k=a("8f8e"),f=a("eebe"),v=a.n(f),y=Object(c["a"])(r,n,o,!1,null,null,null);e["default"]=y.exports;v()(y,"components",{QPage:d["a"],QBtn:u["a"],QSpinnerFacebook:m["a"],QSelect:p["a"],QInput:b["a"],QSeparator:h["a"],QCheckbox:k["a"]})}}]);