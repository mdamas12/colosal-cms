(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{1303:function(e,t,s){e.exports=s.p+"img/logo-colosal-gris.bea6edcc.png"},"74db":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"shadow-2 rounded-borders",staticStyle:{background:"radial-gradient(circle, #0013DB 0%, #00096B 100%)",height:"100vh"},attrs:{view:"lHh lpr lFf",container:""}},[a("q-page-container",{staticStyle:{height:"100vh"}},[a("div",{staticClass:"column items-center justify-center",staticStyle:{height:"100vh"}},[a("q-card",{staticClass:"q-pa-md",staticStyle:{width:"33vw"}},[a("q-card-section",[a("div",{staticClass:"row justify-center q-mr-md q-my-md"},[a("q-img",{staticStyle:{width:"100px"},attrs:{src:s("1303"),ratio:1}})],1),a("div",{staticClass:"row justify-center q-ma-lg"},[a("div",{staticClass:"text-h6 text-grey q-mt-md"},[e._v("Panel Administrativo")])])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"row q-ma-md q-mt-lg  items-center justify-center"},[a("div",{staticClass:"col items-center justify-center"},[a("q-input",{ref:"username",attrs:{outlined:"",type:"text",label:"Usuario","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el correo"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1)]),a("div",{staticClass:"row q-ma-md items-center justify-center"},[a("div",{staticClass:"col items-center justify-center"},[a("q-input",{ref:"password",attrs:{outlined:"",type:e.isPwd?"password":"text",label:"Contraseña","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar una contraseña"},e.isValidPassword]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),a("div",{staticClass:"row items-center justify-center"},[a("q-btn",{staticClass:"q-pa-sm q-px-lg q-my-lg q-mx-md",attrs:{color:"red-10",label:"INICIAR SESIÓN",loading:e.loading},on:{click:function(t){return e.checkUser()}}})],1)])],1)],1)])],1)},r=[],o=s("2b0e"),i=s("e9b9"),n=s("bc3a"),c=s.n(n);const l='"http://minimarketcolosal.com/api/"auth/';class d{login(e){return i["a"].create(t=>{c.a.post(l+"login/",{username:e.username,password:e.password}).then(e=>{console.log(e),localStorage.setItem("token",e.data.key),t.next(e.data),t.complete()}).catch(e=>{console.log(e),t.error(e)})})}logout(){return i["a"].create(e=>{c.a.post(l+"logout/").then(t=>{console.log(t),e.complete()}).catch(t=>{e.error(t)})})}}var u=new d,m=o["default"].extend({name:"Login",data(){return{isPwd:!0,loading:!1,username:"",password:""}},methods:{showNotif(e,t){this.$q.notify({message:e,color:t,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},checkUser(){""!==this.username&&""!==this.password?(console.log("everything in order. Creating user..."),this.loading=!0,this.login()):this.showNotif("Faltan campos por completar","red-10")},login(){u.login({username:this.username,password:this.password}).subscribe({next:()=>{console.log("[login successful]"),this.showNotif("login successful","positive"),this.loading=!1,this.$router.push("/Users")},error:()=>{this.showNotif("Nombre de usuario o contraseña inválidos","red-10")}})},isValidPassword(e){return e.length>8?!!e:"Contraseña debe ser mayor a 8 caracteres"}}}),p=m,h=s("2877"),g=s("4d5a"),w=s("09e3"),f=s("f09f"),y=s("a370"),b=s("068f"),v=s("eb85"),q=s("27f9"),C=s("0016"),x=s("9c40"),k=s("eebe"),S=s.n(k),j=Object(h["a"])(p,a,r,!1,null,null,null);t["default"]=j.exports;S()(j,"components",{QLayout:g["a"],QPageContainer:w["a"],QCard:f["a"],QCardSection:y["a"],QImg:b["a"],QSeparator:v["a"],QInput:q["a"],QIcon:C["a"],QBtn:x["a"]})}}]);