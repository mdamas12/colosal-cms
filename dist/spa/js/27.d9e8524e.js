(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[27],{"92fd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"row q-pa-sm q-pl-lg q-pr-lg"},[a("div",{staticClass:"col-md-12 col-xs-12 q-pa-sm"},[a("div",{staticClass:"row"},[a("div",[a("q-btn",{staticStyle:{color:"#9E9E9E"},attrs:{flat:"",round:"",icon:"keyboard_backspace"},on:{click:function(t){return e.$router.back()}}})],1),null!=e.feature.name?a("div",[a("h5",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[e._v("\n              #"+e._s(this.$router.currentRoute.params.id)+": "+e._s(e.feature.name)+"\n          ")])]):e._e(),a("br")]),a("div",{staticClass:"form-section",staticStyle:{padding:"20px"}},[a("q-form",{ref:"myForm"},[a("q-input",{attrs:{outlined:"",label:"Nombre",color:"dark","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el nombre de la característica nueva"}]},model:{value:e.feature.name,callback:function(t){e.$set(e.feature,"name",t)},expression:"feature.name"}})],1)],1),a("div",{staticClass:"row justify-end"},[a("q-btn",{staticClass:"q-mt-md q-pa-xs q-mr-sm",attrs:{type:"submit",label:"Eliminar",color:"red-10",loading:e.loading2},on:{click:function(t){return e.confirmDelete()}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])}),a("q-btn",{staticClass:"q-mt-md q-pa-xs q-mr-md",attrs:{type:"submit",label:"Guardar",color:"indigo-10",loading:e.loading1},on:{click:function(t){return e.checkFeature()}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])})],1)])])])},o=[],n=a("2b0e"),s=a("c0f4"),i=a("f508"),c=n["default"].extend({data(){return{text:"",feature:{id:this.$router.currentRoute.params.id,name:null},loading1:!1,loading2:!1}},beforeMount(){this.onInit(this.$router.currentRoute.params.id)},methods:{onInit(e){i["a"].show();s["a"].getFeature(e).subscribe({next:e=>{i["a"].hide(),this.feature=e},complete:()=>console.log("[complete]")})},showNotif(e,t){this.$q.notify({message:e,color:t,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},checkFeature(){this.loading1||this.loading2||(""!==this.feature.name?(console.log("everything in order. Creating feature..."),this.updateFeature()):this.showNotif("Faltan campos por completar","red-10"))},updateFeature(){this.loading1=!0;s["a"].updateFeature(this.feature).subscribe({complete:()=>{console.log("[feature updated]"),this.loading1=!1,this.showNotif("Cambios guardados exitosamente","indigo-10"),setTimeout(()=>this.backToFeatures(),1e3)}})},deleteFeature(){this.loading2=!0;s["a"].deleteFeature(this.feature.id).subscribe({complete:()=>{this.loading2=!1,console.log("[feature Deleted]"),this.showNotif("Característica Eliminada","indigo-10"),setTimeout(()=>this.backToFeatures(),1e3)}})},confirmDelete(){this.loading1||this.loading2||this.$q.dialog({title:"Confirmar",message:"¿Está seguro de querer eliminar esta característica?",cancel:!0,persistent:!0,color:"red-10"}).onOk(()=>{this.deleteFeature()}).onCancel(()=>{})},backToFeatures(){this.$router.back()}}}),l=c,u=a("2877"),d=a("9989"),m=a("9c40"),p=a("0378"),f=a("66e5"),h=a("4074"),g=a("cb32"),b=a("0170"),k=a("eb85"),q=a("27f9"),F=a("e669"),x=a("eebe"),w=a.n(x),v=Object(u["a"])(l,r,o,!1,null,null,null);t["default"]=v.exports;w()(v,"components",{QPage:d["a"],QBtn:m["a"],QForm:p["a"],QItem:f["a"],QItemSection:h["a"],QAvatar:g["a"],QItemLabel:b["a"],QSeparator:k["a"],QInput:q["a"],QSpinnerFacebook:F["a"]})},c0f4:function(e,t,a){"use strict";var r=a("e9b9"),o=a("bc3a"),n=a.n(o);const s='"http://minimarketcolosal.com/api/"panel/';class i{getFeatures(e,t){return r["a"].create(a=>{n.a.get(s+`features/?limit=${e}&offset=${t}`).then(e=>{a.next(e.data),a.complete()}).catch(e=>{a.error(e)})})}createFeature(e){return r["a"].create(t=>{n.a.post(s+"features/",{name:e.name}).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}getFeature(e){return r["a"].create(t=>{console.log("id: "+e),n.a.get(s+`features/${e}/`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}updateFeature(e){return r["a"].create(t=>{n.a.put(s+`features/${e.id}/`,{name:e.name}).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}deleteFeature(e){return r["a"].create(t=>{n.a.delete(s+`features/${e}/`).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}}t["a"]=new i}}]);