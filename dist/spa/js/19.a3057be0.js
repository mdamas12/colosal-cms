(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{3772:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",[t("div",{staticClass:"col-md-12 col-xs-12 q-pa-sm"},[t("div",{staticClass:"q-pa-sm"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col",staticStyle:{"max-width":"40px"}},[t("q-btn",{staticStyle:{color:"#9E9E9E"},attrs:{flat:"",round:"",icon:"keyboard_backspace"},on:{click:function(s){return e.$router.back()}}})],1),t("div",{staticClass:"col2"},[t("h5",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[e._v("\n                  Crear Usuario\n              ")])]),t("div",{staticClass:"col"},[t("q-btn",{staticClass:"q-pa-xs q-mr-md float-right",attrs:{color:"red-10",label:"Crear Usuario",loading:e.loading},on:{click:function(s){return e.checkUser()}}})],1)]),t("div",{staticClass:"row q-ma-md"},[t("div",{staticClass:"col"},[t("q-input",{attrs:{outlined:"",label:"Nombre","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el nombre"}]},model:{value:e.user.first_name,callback:function(s){e.$set(e.user,"first_name",s)},expression:"user.first_name"}})],1),t("div",{staticClass:"col q-ml-md"},[t("q-input",{ref:"email",attrs:{outlined:"",type:"email",label:"Correo","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el correo"},e.isValidEmail]},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1)]),t("div",{staticClass:"row q-ma-md justify-between"},[t("div",{staticClass:"col-6"},[t("q-input",{ref:"password",attrs:{outlined:"",type:e.isPwd?"password":"text",label:"Contrase침a","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar una contrase침a"},e.isValidPassword]},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(s){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),t("div",{staticClass:"col-4"},[t("q-toggle",{attrs:{"checked-icon":"check",color:"red-10",label:"Super Usuario","left-label":""},model:{value:e.user.is_superuser,callback:function(s){e.$set(e.user,"is_superuser",s)},expression:"user.is_superuser"}})],1)])])])])},a=[],i=t("2b0e"),o=t("afbf"),l=i["default"].extend({data(){return{user:{is_superuser:!1,username:"",first_name:"",last_name:"",email:"",password:""},isPwd:!0,loading:!1}},methods:{showNotif(e,s){this.$q.notify({message:e,color:s,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},checkUser(){""!==this.user.first_name&&""!==this.user.email&&""!==this.user.password?this.$refs.email.validate()&&this.$refs.password.validate()?(console.log("everything in order. Creating user..."),this.loading=!0,this.createUser()):this.showNotif("Existen campos por corregir","red-10"):this.showNotif("Faltan campos por completar","red-10")},createUser(){o["a"].createUser(this.user).subscribe({complete:()=>{console.log("[user Created]"),this.loading=!1,this.showNotif("Usuario creado exitosamente","indigo-10"),setTimeout(()=>this.backToUsers(),1e3)}})},isValidEmail(e){const s=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return s.test(e)||"Correo inv치lido"},isValidPassword(e){return e.length>8?!!e:"Contrase침a debe ser mayor a 8 caracteres"},backToUsers(){this.$router.back()}}}),n=l,c=t("2877"),u=t("9989"),d=t("9c40"),m=t("27f9"),p=t("0016"),f=t("9564"),h=t("eebe"),b=t.n(h),g=Object(c["a"])(n,r,a,!1,null,null,null);s["default"]=g.exports;b()(g,"components",{QPage:u["a"],QBtn:d["a"],QInput:m["a"],QIcon:p["a"],QToggle:f["a"]})},afbf:function(e,s,t){"use strict";var r=t("e9b9"),a=t("a748");t("f2ea");function i(){let e=localStorage.getItem("token");return e?{Authorization:"token "+e}:{}}const o="";class l{getUserMe(){return r["a"].create(e=>{a["a"].get(o+"users/me/",{headers:i()}).then(s=>{e.next(s.data),e.complete()}).catch(s=>{e.error(s)})})}getUsers(e,s){return r["a"].create(t=>{a["a"].get(o+`users/?limit=${e}&offset=${s}`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}findUsers(e){return r["a"].create(s=>{a["a"].get(o+"users/find/?query="+e).then(e=>{s.next(e.data),s.complete()}).catch(e=>{s.error(e)})})}createUser(e){return r["a"].create(s=>{a["a"].post(o+"users/",{is_superuser:e.is_superuser,username:e.email,first_name:e.first_name,last_name:"",email:e.email,password:e.password,is_staff:!0,is_active:!0}).then(e=>{console.log(e),s.complete()}).catch(e=>{s.error(e)})})}getUser(e){return r["a"].create(s=>{console.log("id: "+e),a["a"].get(o+`users/${e}/`).then(e=>{s.next(e.data),s.complete()}).catch(e=>{s.error(e)})})}updateUser(e){return r["a"].create(s=>{a["a"].put(o+`users/${e.id}/`,{is_superuser:e.is_superuser,username:e.email,first_name:e.first_name,last_name:"",email:e.email,password:e.password,is_staff:!0,is_active:!0}).then(e=>{console.log(),s.complete()}).catch(e=>{s.error(e)})})}deleteUser(e){return r["a"].create(s=>{a["a"].delete(o+`users/${e}/`).then(e=>{console.log(e),s.complete()}).catch(e=>{s.error(e)})})}}s["a"]=new l},f2ea:function(e,s,t){"use strict"}}]);