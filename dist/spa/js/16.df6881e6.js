(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"2f43":function(e,t,a){"use strict"},"33ae":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"row q-pa-sm q-pl-lg q-pr-lg"},[a("div",{staticClass:"col-md-12 col-xs-12 q-pa-sm"},[a("div",{staticClass:"row"},[a("div",[a("q-btn",{staticStyle:{color:"#9E9E9E"},attrs:{flat:"",round:"",icon:"keyboard_backspace"},on:{click:function(t){return e.$router.back()}}})],1),null!=e.brand.name?a("div",[a("h5",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[e._v("\n              #"+e._s(this.$router.currentRoute.params.id)+": "+e._s(e.brand.name)+"\n          ")])]):e._e(),a("br")]),a("div",{staticClass:"form-section",staticStyle:{padding:"20px"}},[a("q-form",{ref:"myForm"},[a("q-input",{attrs:{outlined:"",label:"Nombre",color:"dark","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el nombre de la marca nueva"}]},model:{value:e.brand.name,callback:function(t){e.$set(e.brand,"name",t)},expression:"brand.name"}})],1)],1),a("div",{staticClass:"row justify-end"},[a("q-btn",{staticClass:"q-mt-md q-pa-xs q-mr-sm",attrs:{type:"submit",label:"Eliminar",color:"red-10",loading:e.loading2},on:{click:function(t){return e.confirmDelete()}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])}),a("q-btn",{staticClass:"q-mt-md q-pa-xs q-mr-md",attrs:{type:"submit",label:"Guardar",color:"indigo-10",loading:e.loading1},on:{click:function(t){return e.checkBrand()}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-spinner-facebook")]},proxy:!0}])})],1)])])])},r=[],o=a("2b0e"),s=a("97da"),i=a("f508"),l=o["default"].extend({data(){return{text:"",brand:{id:this.$router.currentRoute.params.id,name:null},loading1:!1,loading2:!1}},beforeMount(){this.onInit(this.$router.currentRoute.params.id)},methods:{onInit(e){i["a"].show();s["a"].getBrand(e).subscribe({next:e=>{i["a"].hide(),this.brand=e},complete:()=>console.log("[complete]")})},showNotif(e,t){this.$q.notify({message:e,color:t,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},checkBrand(){this.loading1||this.loading2||(""!==this.brand.name?(console.log("everything in order. Creating brand..."),this.updateBrand()):this.showNotif("Faltan campos por completar","red-10"))},updateBrand(){this.loading1=!0;s["a"].updateBrand(this.brand).subscribe({complete:()=>{console.log("[brand updated]"),this.loading1=!1,this.showNotif("Cambios guardados exitosamente","indigo-10"),setTimeout(()=>this.backToBrands(),1e3)}})},deleteBrand(){this.loading2=!0;s["a"].deleteBrand(this.brand.id).subscribe({complete:()=>{this.loading2=!1,console.log("[brand Deleted]"),this.showNotif("Marca Eliminada","indigo-10"),setTimeout(()=>this.backToBrands(),1e3)}})},confirmDelete(){this.loading1||this.loading2||this.$q.dialog({title:"Confirmar",message:"¿Está seguro de querer eliminar esta marca?",cancel:!0,persistent:!0,color:"red-10"}).onOk(()=>{this.deleteBrand()}).onCancel(()=>{})},backToBrands(){this.$router.back()}}}),c=l,d=a("2877"),u=a("9989"),m=a("9c40"),b=a("0378"),p=a("66e5"),h=a("4074"),g=a("cb32"),f=a("0170"),k=a("eb85"),q=a("27f9"),x=a("e669"),B=a("eebe"),v=a.n(B),w=Object(d["a"])(c,n,r,!1,null,null,null);t["default"]=w.exports;v()(w,"components",{QPage:u["a"],QBtn:m["a"],QForm:b["a"],QItem:p["a"],QItemSection:h["a"],QAvatar:g["a"],QItemLabel:f["a"],QSeparator:k["a"],QInput:q["a"],QSpinnerFacebook:x["a"]})},"97da":function(e,t,a){"use strict";(function(e){var n=a("e9b9"),r=a("bc3a"),o=a.n(r);a("2f43");const s=e.env.API_URL+"panel/";class i{getBrands(e,t){return n["a"].create(a=>{o.a.get(s+`brands/?limit=${e}&offset=${t}`).then(e=>{a.next(e.data),a.complete()}).catch(e=>{a.error(e)})})}createBrand(e){return n["a"].create(t=>{o.a.post(s+"brands/",{name:e.name}).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}getBrand(e){return n["a"].create(t=>{console.log("id: "+e),o.a.get(s+`brands/${e}/`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}updateBrand(e){return n["a"].create(t=>{o.a.put(s+`brands/${e.id}/`,{name:e.name}).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}deleteBrand(e){return n["a"].create(t=>{o.a.delete(s+`brands/${e}/`).then(e=>{console.log(),t.complete()}).catch(e=>{t.error(e)})})}}t["a"]=new i}).call(this,a("4362"))}}]);