(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{2115:function(e,t,s){"use strict";function a(){let e=localStorage.getItem("token");return e?{Authorization:"token "+e}:{}}s.d(t,"a",(function(){return a}))},7524:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",[s("div",{staticClass:"row q-pa-sm q-pl-lg q-pr-lg"},[s("div",{staticClass:"col-md-12 col-xs-12 q-pt-lg"},[s("div",{staticClass:"row col-xs-12 q-pb-xl"},[s("div",{staticClass:"col"},[s("h5",{staticClass:"text-indigo-10 text-weight-bolder q-ma-none"},[e._v("\n            Usuarios\n          ")]),s("small",{staticClass:"text-subtitle2 text-grey-6 q-mb-none"},[e._v("Existen "+e._s(this.count)+" usuarios almacenados")])]),s("div",{staticClass:"col"},[s("q-btn",{staticClass:"float-right q-pa-xs",attrs:{color:"red-10",label:"Crear usuario"},on:{click:function(t){return e.$router.push({name:"UserCreate"})}}})],1)]),s("div",{staticClass:"q-pa-md"},[s("q-input",{attrs:{outlined:"","bottom-slots":"",label:"Buscar"},on:{keyup:e.searchUser},scopedSlots:e._u([{key:"before",fn:function(){return[s("q-icon",{attrs:{name:"account_circle"}})]},proxy:!0},{key:"append",fn:function(){return[""!==e.text?s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(t){e.text=""}}}):e._e(),s("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),s("q-table",{attrs:{loading:e.loading,data:this.rows,columns:e.columns,"row-key":"id",pagination:e.pagination,"hide-pagination":""},on:{"update:pagination":function(t){e.pagination=t},"row-click":e.onRowClick}}),s("div",{staticClass:"row justify-center q-mt-md"},[s("q-pagination",{attrs:{color:"grey-8",max:this.numberOfPages,size:"sm"},on:{click:function(t){return e.onRequest()}},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)])])])},i=[],n=(s("a434"),s("f508"),s("2b0e"));s("f2ea");var r=s("afbf"),o=n["default"].extend({meta:{title:"Categories - List"},data(){return{loading:!1,text:"",pagination:{page:1,rowsPerPage:25,rowsNumber:0},table:[0],limit:25,offset:0,count:0,currentPage:1,numberOfPages:0,columns:[{name:"first_name",align:"left",label:"Nombre",field:"first_name",sortable:!1},{name:"email",align:"left",label:"Correo",field:"email",sortable:!1},{name:"date",align:"left",label:"Fecha registro",field:"date",sortable:!1},{name:"is_superuser",align:"left",label:"Administrador",field:"is_superuser",format:e=>e?"SÃ­":"No",sortable:!1}],rows:[{id:0,is_superuser:!1,username:"",first_name:"",email:"",date_joined:"string"}]}},mounted(){const e=this;e.onRequest(),e.pagination.rowsNumber=e.count},methods:{onRequest(){this.rows=[],console.log("pagination.page == "+this.pagination.page),this.pagination.currentPage=this.pagination.page,this.offset=this.limit*(this.pagination.page-1),this.table.splice(0,1),console.log(this.table),console.log(`UsersService.getUsers(limit: ${this.limit}, this.pagination.offset: ${this.offset})`),this.loading=!0;r["a"].getUsers(this.limit,this.offset).subscribe({next:e=>{for(let t=0;t<e.results.length;t++)this.rows.push({id:e.results[t].id,is_superuser:e.results[t].is_superuser,username:e.results[t].username,first_name:e.results[t].first_name,email:e.results[t].email,date:e.results[t].date_joined.substring(0,10)});console.log(this.rows),this.count=e.count,this.numberOfPages=Math.ceil(this.count/this.limit),this.loading=!1},complete:()=>console.log("[complete]")})},searchUser(){this.rows=[],console.log("pagination.page == "+this.pagination.page),this.pagination.currentPage=this.pagination.page,this.offset=this.limit*(this.pagination.page-1),this.table.splice(0,1),this.loading=!0;r["a"].findUsers(this.text).subscribe({next:e=>{for(let t=0;t<e.results.length;t++)this.rows.push({id:e.results[t].id,is_superuser:e.results[t].is_superuser,username:e.results[t].username,name:String(e.results[t].first_name+" "+e.results[t].last_name),email:e.results[t].email,date:e.results[t].date_joined.substring(0,10)});console.log(this.rows),this.count=e.count,this.numberOfPages=Math.ceil(this.count/this.limit),this.loading=!1},complete:()=>console.log("[complete]")})},onRowClick(e,t){this.$router.push({path:"/users/detail/"+t.id})}}}),l=o,c=s("2877"),u=s("9989"),p=s("293e"),g=s("9c40"),m=s("27f9"),h=s("0016"),d=s("eaac"),f=s("3b16"),b=s("eebe"),_=s.n(b),w=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=w.exports;_()(w,"components",{QPage:u["a"],QSkeleton:p["a"],QBtn:g["a"],QInput:m["a"],QIcon:h["a"],QTable:d["a"],QPagination:f["a"]})},afbf:function(e,t,s){"use strict";(function(e){var a=s("e9b9"),i=s("bc3a"),n=s.n(i),r=(s("f2ea"),s("2115"));const o=e.env.API_URL;class l{getUserMe(){return a["a"].create(e=>{n.a.get(o+"users/me/",{headers:Object(r["a"])()}).then(t=>{e.next(t.data),e.complete()}).catch(t=>{e.error(t)})})}getUsers(e,t){return a["a"].create(s=>{n.a.get(o+`users/?limit=${e}&offset=${t}`).then(e=>{s.next(e.data),s.complete()}).catch(e=>{s.error(e)})})}findUsers(e){return a["a"].create(t=>{n.a.get(o+"users/find/?query="+e).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}createUser(e){return a["a"].create(t=>{n.a.post(o+"users/",{is_superuser:e.is_superuser,username:e.email,first_name:e.first_name,last_name:"",email:e.email,password:e.password,is_staff:!0,is_active:!0}).then(e=>{console.log(e),t.complete()}).catch(e=>{t.error(e)})})}getUser(e){return a["a"].create(t=>{console.log("id: "+e),n.a.get(o+`users/${e}/`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}updateUser(e){return a["a"].create(t=>{n.a.put(o+`users/${e.id}/`,{is_superuser:e.is_superuser,username:e.email,first_name:e.first_name,last_name:"",email:e.email,password:e.password,is_staff:!0,is_active:!0}).then(e=>{console.log(),t.complete()}).catch(e=>{t.error(e)})})}deleteUser(e){return a["a"].create(t=>{n.a.delete(o+`users/${e}/`).then(e=>{console.log(e),t.complete()}).catch(e=>{t.error(e)})})}}t["a"]=new l}).call(this,s("4362"))},f2ea:function(e,t,s){"use strict"}}]);