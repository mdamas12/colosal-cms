(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"3ae3":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",[r("div",{staticClass:"row q-pa-sm q-pl-lg q-pr-lg"},[r("div",{staticClass:"col-md-12 col-xs-12 q-pa-sm"},[r("div",{staticClass:"row"},[r("div",[r("q-btn",{staticStyle:{color:"#9E9E9E"},attrs:{flat:"",round:"",icon:"keyboard_backspace"},on:{click:function(t){return e.$router.back()}}})],1),null!=e.supplier.name?r("div",[r("h5",{staticClass:"vertical-top col2 text-indigo-10 text-weight-bolder q-pa-sm",staticStyle:{"margin-top":"-3px"}},[e._v("\n              Proveedor: "+e._s(e.supplier.name)+"\n          ")])]):e._e(),r("br")]),r("div",{staticClass:"form-section",staticStyle:{padding:"20px"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col q-mr-md"},[r("q-input",{attrs:{outlined:"",color:"dark",label:"Nombre","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el nombre"}]},model:{value:e.supplier.name,callback:function(t){e.$set(e.supplier,"name",t)},expression:"supplier.name"}})],1),r("div",{staticClass:"col"},[r("q-input",{ref:"email",attrs:{outlined:"",color:"dark",type:"email",label:"Correo","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar un correo"},e.isValidEmail]},model:{value:e.supplier.email,callback:function(t){e.$set(e.supplier,"email",t)},expression:"supplier.email"}})],1)]),r("div",{staticClass:"row q-my-sm"},[r("div",{staticClass:"col"},[r("q-input",{attrs:{outlined:"",color:"dark",label:"Dirección","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar una dirección"}]},model:{value:e.supplier.address,callback:function(t){e.$set(e.supplier,"address",t)},expression:"supplier.address"}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col q-mr-md"},[r("q-input",{attrs:{outlined:"",color:"dark",label:"Número de Teléfono","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar un número de telefono"},e.isValidPhone]},model:{value:e.supplier.number,callback:function(t){e.$set(e.supplier,"number",t)},expression:"supplier.number"}})],1),r("div",{staticClass:"col"},[r("q-input",{attrs:{outlined:"",color:"dark",label:"Representante","lazy-rules":"",rules:[function(e){return!!e||"Debe ingresar el representante"}]},model:{value:e.supplier.agent,callback:function(t){e.$set(e.supplier,"agent",t)},expression:"supplier.agent"}})],1)])]),r("div",{staticClass:"row items-end justify-end"},[r("q-btn",{staticClass:"q-pa-xs q-mr-xs float-right",attrs:{flat:"",color:"red-10",label:"Eliminar",loading:e.loading2},on:{click:function(t){return e.confirmDelete()}}}),r("q-btn",{staticClass:"q-pa-xs q-mr-md float-right",attrs:{color:"red-10",label:"Guardar",loading:e.loading1},on:{click:function(t){return e.checkSupplier()}}})],1)])])])},a=[],s=r("2b0e"),l=r("89b8"),o=r("f508"),n=s["default"].extend({data(){return{text:"",supplier:{id:this.$router.currentRoute.params.id,name:"",address:"",email:"",number:"",agent:""},loading1:!1,loading2:!1}},beforeMount(){this.onInit(this.$router.currentRoute.params.id)},methods:{onInit(e){o["a"].show();l["a"].getSupplier(e).subscribe({next:e=>{o["a"].hide(),this.supplier=e},complete:()=>console.log("[complete]")})},showNotif(e,t){this.$q.notify({message:e,color:t,actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},checkSupplier(){""!==this.supplier.name&&""!==this.supplier.address&&""!==this.supplier.email&&""!==this.supplier.number&&""!==this.supplier.agent?this.$refs.email.hasError?this.showNotif("Existen campos por corregir","red-10"):(console.log("everything in order. Creating user..."),this.loading=!0,this.updateSupplier()):this.showNotif("Faltan campos por completar","red-10")},updateSupplier(){if(this.loading1||this.loading2)return;this.loading1=!0;l["a"].updateSupplier(this.supplier).subscribe({complete:()=>{console.log("[supplier updated]"),this.loading1=!1,this.showNotif("Cambios guardados exitosamente","indigo-10"),setTimeout(()=>this.$router.back(),1e3)}})},confirmDelete(){this.$q.dialog({title:"Confirmar",message:"¿Está seguro de querer eliminar este proveedor?",cancel:!0,persistent:!0,color:"red-10"}).onOk(()=>{this.deleteSupplier()}).onCancel(()=>{})},deleteSupplier(){if(this.loading1||this.loading2)return;this.loading2=!0;l["a"].deleteSupplier(this.supplier.id).subscribe({complete:()=>{this.loading2=!1,console.log("[supplier Deleted]"),this.showNotif("Proveedor eliminado exitosamente","indigo-10"),setTimeout(()=>this.$router.back(),1e3)}})},isValidEmail(e){const t=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return t.test(e)||"Correo inválido"},isValidPhone(e){const t=/^(?=[0-9+-]{1,15}$)/;return t.test(e)||"Teléfono inválido"},backToSuppliers(){this.$router.back()}}}),c=n,u=r("2877"),p=r("9989"),d=r("9c40"),m=r("27f9"),h=r("eebe"),g=r.n(h),b=Object(u["a"])(c,i,a,!1,null,null,null);t["default"]=b.exports;g()(b,"components",{QPage:p["a"],QBtn:d["a"],QInput:m["a"]})},"4f5a":function(e,t,r){"use strict"},"89b8":function(e,t,r){"use strict";(function(e){var i=r("e9b9"),a=r("bc3a"),s=r.n(a);r("4f5a");const l=e.env.API_URL+"panel/";class o{getSuppliers(e,t){return i["a"].create(r=>{s.a.get(l+`providers/?limit=${e}&offset=${t}`).then(e=>{r.next(e.data),r.complete()}).catch(e=>{r.error(e)})})}createSupplier(e){return i["a"].create(t=>{s.a.post(l+"providers/",{name:e.name,address:e.address,email:e.email,number:e.number,agent:e.agent}).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}getSupplier(e){return i["a"].create(t=>{console.log("id: "+e),s.a.get(l+`providers/${e}/`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}searchSuppliers(e){return i["a"].create(t=>{s.a.get(l+`providers/search/${e}/`).then(e=>{t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}updateSupplier(e){return i["a"].create(t=>{s.a.put(l+`providers/${e.id}/`,{name:e.name,address:e.address,email:e.email,number:e.number,agent:e.agent}).then(e=>{console.log(),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}deleteSupplier(e){return i["a"].create(t=>{s.a.delete(l+`providers/${e}/`).then(e=>{console.log(e),t.next(e.data),t.complete()}).catch(e=>{t.error(e)})})}}t["a"]=new o}).call(this,r("4362"))}}]);