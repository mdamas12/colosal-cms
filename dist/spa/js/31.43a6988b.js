(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"2d0f":function(t,e,o){"use strict";var a=o("e9b9"),i=o("a748");const n='"http://minimarketcolosal.com/api/"panel/';class s{getPromotions(t,e){return a["a"].create(o=>{i["a"].get(n+`promotions/list?limit=${t}&offset=${e}`).then(t=>{o.next(t.data),o.complete()}).catch(t=>{o.error(t)})})}createPromotion(t,e){return a["a"].create(o=>{Object(i["a"])({method:"post",url:n+"promotions/",data:t,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{let a=t.data.id;0===Object.keys(e).length?(o.next(t.data),o.complete()):Object(i["a"])({method:"post",url:n+"promotions/products/",data:{products_detail:e,promotion:a}}).then(t=>{console.log(t),o.next(t.data),o.complete()}).catch(t=>{o.error(t)})}).catch(t=>{o.error(t)})})}getPromotion(t){return a["a"].create(e=>{i["a"].get(n+`promotions/search/${t}/`).then(t=>{console.log(t.data),e.next(t.data),e.complete()}).catch(t=>{e.error(t)})})}updatePromotion(t,e,o,s){return a["a"].create(a=>{Object(i["a"])({method:"put",url:n+`promotions/modification/${s}/`,data:t,headers:{"Content-Type":"multipart/form-data"}}).then(t=>{0===Object.keys(e).length&&0===Object.keys(o).length?(a.next(t.data),a.complete()):Object(i["a"])({method:"put",url:n+`promotions/products-modification/${s}/`,data:{products_detail:e,products_news:o}}).then(t=>{console.log(t),a.next(t.data)}).catch(t=>{a.error(t)})}).catch(t=>{a.error(t)})})}deletePromotion(t){return a["a"].create(e=>{i["a"].delete(n+`promotions/modification/${t}/`).then(t=>{console.log(),e.next(t)}).catch(t=>{e.error(t)})})}deleteProductPromotion(t){return a["a"].create(e=>{i["a"].delete(n+`promotions/delete-detail/${t}/`).then(t=>{console.log(t.data),e.next(t.data)}).catch(t=>{e.error(t)})})}}e["a"]=new s},9553:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("div",{staticClass:"row q-pa-sm q-pl-lg q-pr-lg"},[o("div",{staticClass:"col-md-12 col-xs-12 q-pt-lg"},[o("div",{staticClass:"row col-xs-12 q-pb-xl"},[o("div",{staticClass:"col"},[o("h5",{staticClass:"text-indigo-10 text-weight-bolder q-ma-none"},[t._v("\n            Promociones\n          ")]),o("small",{staticClass:"text-subtitle2 text-grey-7 q-mb-none"},[t._v("Existen "+t._s(this.count)+" promociones almacenadas")])]),o("div",{staticClass:"col"},[o("q-btn",{staticClass:"float-right",attrs:{color:"red-10",label:"Crear promoción"},on:{click:function(e){return t.$router.push({name:"PromotionCreate"})}}})],1)]),o("div",{staticClass:"col-md-12 col-xs-12 q-pt-lg"},[o("q-table",{attrs:{loading:t.loading,data:this.rows,columns:t.columns,"row-key":"name",pagination:t.pagination,"hide-pagination":""},on:{"update:pagination":function(e){t.pagination=e},"row-click":t.onRowClick}}),t.numberOfPages>1?o("div",{staticClass:"row justify-center q-mt-md"},[o("q-pagination",{attrs:{color:"indigo-10",max:this.numberOfPages,size:"sm"},on:{click:function(e){return t.onRequest()}},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1):t._e()],1)])])])},i=[],n=(o("a434"),o("ddb0"),o("f508"),o("2b0e")),s=o("2d0f"),l=n["default"].extend({meta:{title:"Categories - List"},data(){return{loading:!1,pagination:{page:1,rowsPerPage:25,rowsNumber:0},table:[0],limit:25,offset:0,count:0,currentPage:1,numberOfPages:0,columns:[{name:"name",align:"left",label:"Nombre",field:"name",sortable:!1},{name:"description",align:"left",label:"Descripción",field:"description",sortable:!1},{name:"price",align:"left",label:"Precio",field:"price",sortable:!1},{name:"coin",align:"left",label:"Moneda",field:"coin",sortable:!1},{name:"quantity",align:"left",label:"Existencias",field:"quantity",sortable:!1}],rows:[],promotion:{name:"",description:"",image:"",price:0,coin:"",quantity:0}}},mounted(){const t=this;t.onRequest(),t.pagination.rowsNumber=t.count},methods:{onRequest(){this.loading=!0,console.log("pagination.page == "+this.pagination.page),this.pagination.currentPage=this.pagination.page,this.offset=this.limit*(this.pagination.page-1),this.table.splice(0,1),console.log(this.table),this.table.splice(0,0,1),console.log(`PromotionsService.getPromotions(limit: ${this.limit}, this.pagination.offset: ${this.offset})`);s["a"].getPromotions(this.limit,this.offset).subscribe({next:t=>{console.log(t),this.rows.splice(0,this.rows.length,...t.results),console.log(this.rows),this.count=t.count,this.numberOfPages=Math.ceil(this.count/this.limit),this.loading=!1},complete:()=>console.log("[complete]")})},onRowClick(t,e){this.$router.push({path:"/promotions/detail/"+e.id})}}}),r=l,c=o("2877"),p=o("9989"),m=o("293e"),d=o("9c40"),g=o("eaac"),u=o("3b16"),h=o("eebe"),b=o.n(h),f=Object(c["a"])(r,a,i,!1,null,null,null);e["default"]=f.exports;b()(f,"components",{QPage:p["a"],QSkeleton:m["a"],QBtn:d["a"],QTable:g["a"],QPagination:u["a"]})}}]);