(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{1303:function(t,e,s){t.exports=s.p+"img/logo-colosal-gris.bea6edcc.png"},"74db":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"shadow-2 rounded-borders",staticStyle:{background:"radial-gradient(circle, #0013DB 0%, #00096B 100%)",height:"100vh"},attrs:{view:"lHh lpr lFf",container:""}},[a("q-page-container",{staticStyle:{height:"100vh"}},[a("div",{staticClass:"column items-center justify-center",staticStyle:{height:"100vh"}},[a("q-card",{staticClass:"q-pa-md",staticStyle:{width:"33vw"}},[a("q-card-section",[a("div",{staticClass:"row justify-center q-mr-md q-my-md"},[a("q-img",{staticStyle:{width:"100px"},attrs:{src:s("1303"),ratio:1}})],1),a("div",{staticClass:"row justify-center q-ma-lg"},[a("div",{staticClass:"text-h6 text-grey q-mt-md"},[t._v("Panel Administrativo")])])]),a("q-separator",{attrs:{inset:""}}),a("q-card-section",[a("div",{staticClass:"row q-ma-md q-mt-lg  items-center justify-center"},[a("div",{staticClass:"col items-center justify-center"},[a("q-input",{ref:"username",attrs:{outlined:"",type:"text",label:"Usuario","lazy-rules":"",rules:[function(t){return!!t||"Debe ingresar el correo"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)]),a("div",{staticClass:"row q-ma-md items-center justify-center"},[a("div",{staticClass:"col items-center justify-center"},[a("q-input",{ref:"password",attrs:{outlined:"",type:t.isPwd?"password":"text",label:"Contraseña","lazy-rules":"",rules:[function(t){return!!t||"Debe ingresar una contraseña"},t.isValidPassword]},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),a("div",{staticClass:"row items-center justify-center"},[a("q-btn",{staticClass:"q-pa-sm q-px-lg q-my-lg q-mx-md",attrs:{color:"red-10",label:"INICIAR SESIÓN",loading:t.loading},on:{click:function(e){return t.checkUser()}}})],1)])],1)],1)])],1)},r=[],o=s("2b0e"),i=s("e9b9"),n=s("bc3a"),c=s.n(n);const l='"http://minimarketcolosal.com/api/"auth/';class d{login(t){return i["a"].create(e=>{c.a.post(l+"login/",{username:t.username,password:t.password}).then(t=>{console.log(t),localStorage.setItem("token",t.data.key),e.next(t.data),e.complete()}).catch(t=>{console.log(t),e.error(t)})})}logout(){return i["a"].create(t=>{c.a.post(l+"logout/").then(e=>{console.log(e),t.complete()}).catch(e=>{t.error(e)})})}}var u=new d,m=o["default"].extend({name:"Login",data(){return{isPwd:!0,loading:!1,username:"",password:""}},methods:{showNotif(t,e){this.$q.notify({message:t,color:e,actions:[{label:"Ok",color:"white",handler:()=>{}}]})},checkUser(){""!==this.username&&""!==this.password?(console.log("everything in order."),this.loading=!0,this.login()):this.showNotif("Faltan campos por completar","red-10")},login(){u.login({username:this.username,password:this.password}).subscribe({complete:()=>{console.log("todo ok"),this.showNotif("login successful","positive"),this.loading=!1,this.$router.push("/")},error:()=>{this.showNotif("Nombre de usuario o contraseña inválidos","red-10")}})},isValidPassword(t){return t.length>8?!!t:"Contraseña debe ser mayor a 8 caracteres"}}}),p=m,h=s("2877"),g=s("4d5a"),w=s("09e3"),f=s("f09f"),y=s("a370"),b=s("068f"),v=s("eb85"),q=s("27f9"),C=s("0016"),k=s("9c40"),x=s("eebe"),S=s.n(x),j=Object(h["a"])(p,a,r,!1,null,null,null);e["default"]=j.exports;S()(j,"components",{QLayout:g["a"],QPageContainer:w["a"],QCard:f["a"],QCardSection:y["a"],QImg:b["a"],QSeparator:v["a"],QInput:q["a"],QIcon:C["a"],QBtn:k["a"]})}}]);